{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\OneDrive\\\\AWScourse\\\\Twitter\\\\front-end\\\\src\\\\components\\\\HomePage.js\";\nimport React, { useContext, useState } from 'react';\nimport { Button, Col, Row, Container, Form, Card } from \"react-bootstrap\";\nimport { authContext } from '../context/AuthContext';\n\nconst HomePage = () => {\n  const {\n    setAuthData,\n    auth\n  } = useContext(authContext);\n  const [tweet, setTweet] = useState();\n  const fetchTweets = auth.data.tweets || []; //bara de egna tweetsen\n\n  const submitTweet = e => {\n    const userId = auth.data.id;\n    fetch(\"https://1lfzbgijz6.execute-api.eu-north-1.amazonaws.com/dev/users/\" + userId + \"/tweet\", {\n      method: \"PUT\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        tweet: tweet\n      })\n    }).then(response => response.json()).then(res => {\n      if (tweet.includes(\"#email\")) {\n        // send sqs\n        sendSqs();\n        console.log(\"tweet sent with sqs\");\n      } else {\n        console.log(\"tweet sent to database\");\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }; //emailQueue\n\n\n  const sendSqs = () => {\n    const email = auth.data.email;\n    fetch(\"https://uirnqlgx81.execute-api.eu-north-1.amazonaws.com/prod\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email\n      })\n    }).then(response => response.json()).then(res => {\n      console.log(res);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const onLogOut = () => {\n    setAuthData(null);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, `Welcome ${auth.data.username}`, \" \"), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    as: Col,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 33\n    }\n  }, \"Send a tweet:\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    autoComplete: \"off\",\n    type: \"text\",\n    onChange: e => setTweet(e.target.value),\n    className: \"bg-dark text-white\",\n    placeholder: \"Send a tweet!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: submitTweet,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 37\n    }\n  }, \"Tweet!\")))), /*#__PURE__*/React.createElement(Button, {\n    onClick: onLogOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, \"Logout\"))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, \"Twitterfeed\"), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, fetchTweets.map((item, index) => /*#__PURE__*/React.createElement(Card, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 37\n    }\n  }, item.tweet), /*#__PURE__*/React.createElement(Card.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 37\n    }\n  }, \"Datum: \", item.createdAt, \" av \", auth.data.username))))))));\n};\n\nexport default HomePage;","map":{"version":3,"sources":["C:/Users/Admin/OneDrive/AWScourse/Twitter/front-end/src/components/HomePage.js"],"names":["React","useContext","useState","Button","Col","Row","Container","Form","Card","authContext","HomePage","setAuthData","auth","tweet","setTweet","fetchTweets","data","tweets","submitTweet","e","userId","id","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","res","includes","sendSqs","console","log","catch","error","email","onLogOut","username","target","value","map","item","index","createdAt"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport {Button, Col, Row, Container, Form, Card} from \"react-bootstrap\"\r\nimport { authContext } from '../context/AuthContext'\r\n\r\n\r\nconst HomePage = () => {\r\n\r\n    const {setAuthData, auth} = useContext(authContext)\r\n    const [tweet, setTweet] = useState()\r\n    const fetchTweets = auth.data.tweets || [] //bara de egna tweetsen\r\n\r\n    const submitTweet = (e) => {\r\n        const userId = auth.data.id\r\n        fetch(\"https://1lfzbgijz6.execute-api.eu-north-1.amazonaws.com/dev/users/\" + userId + \"/tweet\", {\r\n            method: \"PUT\",\r\n            headers: {\r\n                Accept: \"application/json\", \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                tweet: tweet\r\n            })   \r\n        })\r\n        .then((response) => response.json())\r\n        .then(res => {\r\n            if(tweet.includes(\"#email\")){\r\n                // send sqs\r\n                sendSqs()\r\n                console.log(\"tweet sent with sqs\")\r\n            }\r\n            else {\r\n                console.log(\"tweet sent to database\")\r\n            }\r\n        }).catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n\r\n    //emailQueue\r\n    const sendSqs = () => {\r\n        const email = auth.data.email\r\n        fetch(\"https://uirnqlgx81.execute-api.eu-north-1.amazonaws.com/prod\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                Accept: \"application/json\", \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({email})   \r\n        })\r\n        .then((response) => response.json())\r\n        .then(res => {\r\n            console.log(res)\r\n        }).catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n\r\n    const onLogOut = () => {\r\n        setAuthData(null)\r\n    }\r\n\r\n\r\n        return(\r\n            <>\r\n            <Row>\r\n                <Col>\r\n                    <Container>\r\n                        <h2 className=\"text-center\">{`Welcome ${auth.data.username}`} </h2>\r\n                        <Card>\r\n                            <Form.Row>\r\n                                <Form.Group as= {Col}>\r\n                                <Form.Label>Send a tweet:</Form.Label>\r\n                                <Form.Control required autoComplete=\"off\"\r\n                                        type=\"text\"\r\n                                        onChange= {e => setTweet(e.target.value)}\r\n                                        className={\"bg-dark text-white\"}\r\n                                        placeholder= \"Send a tweet!\" />\r\n                                        <br/>\r\n                                    <Button onClick={submitTweet}>Tweet!</Button>\r\n                                </Form.Group>\r\n                            </Form.Row>\r\n                        </Card>\r\n                        <Button onClick={onLogOut}>Logout</Button>\r\n                    </Container>\r\n                    </Col>\r\n                <Col>\r\n                <h2>Twitterfeed</h2>\r\n                    <Container>\r\n                        { fetchTweets.map((item, index) => (\r\n                            <Card key={index}>\r\n                                <Card.Body>\r\n                                    <Card.Title>{item.tweet}</Card.Title>\r\n                                    <Card.Text>\r\n                                        Datum: {item.createdAt} av {auth.data.username}\r\n                                    </Card.Text>               \r\n                                </Card.Body>\r\n                            </Card>\r\n                        )) }\r\n                    </Container>\r\n                    </Col>\r\n            </Row>\r\n            </>\r\n        )\r\n    }\r\n\r\nexport default HomePage"]},"metadata":{},"sourceType":"module"}